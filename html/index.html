<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Consent Page</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <link rel="stylesheet" href="index.css">
</head>

<body>
    <div class="consent-page-container">
        <div class="testing-text">testing no display now</div>
        <div class="testing-text2">test ALTextToSpeech</div>
        <h2 class="consent-page-header d-flex justify-content-center">Pepper robot policy</h2>
        <label class="consent-label">
            <b>Usage consent:</b>
            <br />
            <label>By agreeing below, you allow Pepper to be used along with this application in this session, we may
                collect your feedback after the session that can be used to improve our services and your
                experience.</label>
        </label>
        <form class="row g-3 needs-validation" action="./components/lessonSelection/lessonSelection.html" novalidate>
            <div class="col-12 d-flex justify-content-center">
                <div class="form-check">
                    <input class="form-check-input" type="checkbox" value="" id="invalidCheck" required>
                    <label class="form-check-label" for="invalidCheck">
                        Agree to terms and conditions
                    </label>
                    <div class="invalid-feedback">
                        You must agree before submitting.
                    </div>
                </div>
            </div>
            <div class="consent-page-button-group col-12 d-flex justify-content-center">
                <div class="d-flex flex-column">
                    <button class="btn btn-primary p-2" type="submit">Submit form</button>
                    <div class="vertical-spacing"></div>
                    <button class="btn btn-danger p-2" type="button">Exit</button>
                </div>
            </div>
        </form>
        
    </div>
    <script src="/libs/qimessaging/2/qimessaging.js"></script>
    <script src="/libs/qi/2/qi.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/qi-js/2.10.3/qi.min.js"></script>
    <script src="https://www.promisejs.org/polyfills/promise-6.0.0.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM"
        crossorigin="anonymous"></script>
    <script src="index.js"></script>
    <script>
        var displayDiv = document.querySelector('.testing-text');
        var displayDiv2 = document.querySelector('.testing-text2');
        displayDiv.textContent = 'code running';

        var session = new QiSession(function () {
            console.log("Session connected");
            displayDiv.textContent = "Testing connection";
            session = s;

            // s.service("ALTextToSpeech").done(function (tts) {
            // displayDiv.textContent = 'ALTextToSpeech worked';
            // // tts is a proxy to the ALTextToSpeech service
            // tts.getLanguage().done(function (lang) {
            //     tts.say("I speak " + lang);
            //     displayDiv2.textContent = "IT WORKKKKKKKKKKKKKKKKKKKKKKS";
            // }).fail(function (error) {
            //     console.log("An error occurred: " + error);
            //     displayDiv2.textContent = "An error occurred1";
            // });

        // }).fail(function (error) {
        //     console.log("An error occurred:", error);
        //     displayDiv2.textContent = "An error occurred2";
        // });

        }, disconnected,location.host);



        function connected(s) {

            //If you want to subscribe so some events (to send info pepper->tablet) call the function here
        }

        function disconnected(error) {
            console.log("Session disconnected");
            displayDiv.textContent = "Session disconnected";
        }


        session.service("ALTextToSpeech").done(function (tts) {
                tts.say("Testing it works");
                displayDiv2.textContent = "IT WORKKKKKKKKKKKKKKKKKKKKKKS";
            // tts is a proxy to the ALTextToSpeech service
            }).fail(function (error) {
            console.log("An error occurred:", error);
                displayDiv2.textContent = "An error occurred ALTextToSpeech";
            });
        

        //session.connect("192.168.0.168:9559");

        // session.socket().on('connect', function () {
        //     // Find the element where you want to display the message
        //     var displayDiv = document.querySelector('.testing-text');
        //     // Set the text of this element
        //     displayDiv.textContent = 'socket function worked';

        //     // This replaces the console.log('QiSession connected!');
        // }).on('disconnect', function () {
        //     var displayDiv = document.querySelector('.testing-text');
        //     // Optionally, update or clear the message on disconnect
        //     displayDiv.textContent = 'QiSession disconnected!';

        //     // This replaces the console.log('QiSession disconnected!');
        // });

        
    </script>
</body>

</html>